#!/bin/bash

# Script generated by Google Gemini

# --- C++ STANDARD CHECKER SCRIPT ---
# This script creates a temporary C++ source file and attempts to compile it
# against various C++ standards (c++11 through c++23) using the g++ compiler.

# Define the C++ standards to check against
STANDARDS=("11" "14" "17" "20" "23" "26")
CPP_FILE="temp_test.cpp"
OUTPUT_PREFIX="test_cpp"

echo "========================================================="
echo " C++ Compiler Standard Compatibility Check (g++)"
echo "========================================================="

# 1. Create a simple C++ file using a heredoc (ensuring standard compatibility)
# This simple file should compile under all standards from C++11 onwards.
cat > $CPP_FILE << EOF
#include <iostream>

int main() {
    std::cout << "Test compiled successfully." << std::endl;
    return 0;
}
EOF

if [ ! -f $CPP_FILE ]; then
    echo "Error: Could not create temporary C++ source file ($CPP_FILE)."
    exit 1
fi

# 2. Loop through each standard and attempt compilation
for VERSION in "${STANDARDS[@]}"; do
    STD_FLAG="c++${VERSION}"
    OUTPUT_FILE="${OUTPUT_PREFIX}_${VERSION}"

    echo "--- Checking standard: -$STD_FLAG ---"

    # Attempt to compile the file, suppressing compiler warnings/errors to keep output clean
    g++ -std=$STD_FLAG $CPP_FILE -o $OUTPUT_FILE 2> /dev/null

    # Check the exit status of the previous command ($?)
    # Using 'echo -e' allows the interpretation of ANSI color escape codes:
    # \033[32m for green text, \033[31m for red text, and \033[0m to reset color.
    if [ $? -eq 0 ]; then
        echo -e "\033[32mSUCCESS\033[0m: Code successfully compiled using -$STD_FLAG."
    else
        echo -e "\033[31mFAILURE\033[0m: -$STD_FLAG is not supported by your g++."
    fi

    echo ""
done

# 3. Clean up temporary files
rm -f $CPP_FILE
rm -f ${OUTPUT_PREFIX}_*
